(function(a){if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.host}a(function(){var c=a("#shrtr"),e=a("<img />").attr("src","/img/spinner.gif");c.append(e);e.hide();_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var d=_.template(a("#shrtr-display-template").html());var b=_.template(a("#shrtr-form-template").html());window.shrtrFormSubmit=function(){a("#shrtr-url-form").hide();e.show();var f=a("input:first").val();a.post("/shrtn",{url:f},function(g){e.hide();if(g.error==="Error"){c.append(d({urlOne:"System Error, try again later",urlTwo:""}));return}c.append(d({urlOne:f,urlTwo:window.location.origin+"/"+g.surl}))});return true};if(window.shrtrSurl!=="false"){e.show();a.post("/extn",{surl:window.shrtrSurl},function(f){var g=window.location.origin+"/"+window.shrtrSurl;e.hide();if(f.error==="Error"){c.append(d({urlOne:g,urlTwo:"System Error, try again later"}));return}if(f.error==="Not found"){c.append(d({urlOne:g,urlTwo:"Not found"}));return}c.append(d({urlOne:g,urlTwo:"Redirecting in 3sec "+f.url}));setTimeout(function(){window.location=f.url},3000)})}else{c.append(b())}})})(jQuery);